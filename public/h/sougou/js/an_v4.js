(function(){var d=window,a=document,c=d.location;var b="__shequstat";var e={server:"http://dr.wenwen.com/p1.gif",errServer:"http://pr.wenwen.com/pingd?srctype=exception",cookiePrefix:"sqstat_",imgArr:[],cookie:"",query:"",hostname:c.hostname,referrer:a.referrer,domain:"",cookieInfo:{},queryInfo:{},divHandlers:[],data:{},gatherTypes:{ss_c:"div"},groupTypes:{ch:"ch",pid:"pid"},persistentTypes:{pid:{entr:"ss_pidf"},cid:{entr:"ss_cidf"}},cookieParam:["ssuid","pid","cid","ss_pidf","ss_cidf","p_uin","cookie_uin"],kvSplit:function(l,n,g){if(typeof l!="string"||l===""){return{}}n=n||"&";g=g||"=";var m={};var j=l.split(n);for(var k=0;k<j.length;++k){if(j[k].length==0){continue}var p=j[k];var f=p.indexOf(g);if(f<0){continue}var o=p.substring(0,f);var h=p.substring(f+g.length);m[o]=h}return m},getDomain:function(g){if(g===undefined&&this.domain){return this.domain}if(g===undefined){g=this.hostname}var f=g.split(".");if(f[f.length-1].match(/^\d+$/)){domain=g}else{domain=f.slice(-2).join(".")}if(g===this.hostname){this.domain=domain}return domain},getCookie:function(f){if(a.cookie!==this.cookie){this.cookie=a.cookie;this.cookieInfo=this.kvSplit(a.cookie,"; ")}return(this.cookieInfo[f])?decodeURIComponent(this.cookieInfo[f]):this.cookieInfo[f]},getQuery:function(f){if(c.search!==this.query){this.query=c.search;this.queryInfo=this.kvSplit(c.search.substring(1))}return this.queryInfo[f]},setCookie:function(h,k,f,l,j){l=l||"/";j=j||this.getDomain();var g=function(m){var n=new Date();if(m=="unlimited"){n.setFullYear(2038,0,1)}else{if(typeof m=="number"){if(m<=0){n.setFullYear(1970,1,1)}else{n.setTime(n.getTime()+m*1000)}}}return n.toGMTString()};var i=h+"="+encodeURIComponent(k)+(f||f===0?("; expires="+g(f)):"")+(l?";path="+l:"")+(j?";domain="+j:"");a.cookie=i},delCookie:function(f,h,g){this.setCookie(f,"",0,h,g)},loopDivs:function(){var h=a.getElementsByTagName("div");for(var g=0;g<h.length;++g){for(var f=0;f<this.divHandlers.length;++f){this.divHandlers[f](h[g])}}},regDivHandler:function(f){this.divHandlers.push(f)},regDivHandlers:function(){for(var f in this.gatherTypes){this.regDivHandler(this.getGatherFunc(f))}for(var f in this.groupTypes){this.regDivHandler(this.getGroupFunc(f))}},getGatherFunc:function(g,f){var f=f||"^";var h=this.data;return function(j){var i=j.getAttribute(g);if(i){h[g]=h[g]===undefined?"":h[g];h[g]+=(h[g]===""?"":f)+i}}},getGroupFunc:function(g,h){var h=h||this.getDomain();var f=this;return function(o){var j=o.getAttribute(g);if(!j){return}var l=g+"="+j;var n=o.getElementsByTagName("a");var m=new RegExp("[&?]"+g+"=");for(var k=0;k<n.length;++k){url=n[k];if(f.getDomain(url.hostname)==h){if(m.test(url.search)){continue}url.href=" "+url.href+(url.search?"&":"?")+l}}}},genSsuid:function(){var f=new Date().getUTCMilliseconds();return(Math.round(Math.random()*2147483647)*f)%10000000000},submit:function(j,i){i=i||this.server;var n="";if(j.ref!==undefined){n="ref="+j.ref;delete (j.ref)}for(var g in j){n+=(n?"&":"")+g+"="+j[g]}n+=(n?"&":"")+"rand="+Math.random();var l=i+"?"+n;var m=new Image();var f=this.imgArr.push(m);var h=this.imgArr;m.onload=(m.onerror=function(){h[f-1]=null});m.src=l;m=null},setPersistentParams:function(){for(var h in this.persistentTypes){var g=this.persistentTypes[h];var i=g.entr||(this.cookiePrefix+h+"_f");var f=this.getQuery(h);if(f){if(f==this.getCookie(h)){this.setCookie(i,"1")}else{this.delCookie(i);this.setCookie(h,f)}}else{if(this.getCookie(h)){this.setCookie(i,"1")}}}},run:function(l){if(typeof(l)!="object"){l={}}this.setPersistentParams();this.regDivHandlers();this.loopDivs();if(!this.getCookie("ssuid")){this.setCookie("ssuid",this.genSsuid(),"unlimited")}l.ver=5;l.ref=encodeURIComponent(this.referrer);l.searchId=window.__searchId||0;for(var j in this.gatherTypes){var g=this.gatherTypes[j];if(this.data[j]){l[g]=this.data[j]}}for(var h=0;h<this.cookieParam.length;h++){var f=this.cookieParam[h];l[f]=this.getCookie(f)}this.submit(l)},stget:function(h,m,f,l,g){if(!e.getCookie("ssuid")){e.setCookie("ssuid",e.genSsuid(),"unlimited")}var m=m||"ask";var f=f||"";var l=l||0;var g=g||0;var k=window.__searchId||0;var i={srctype:"getsret",lurl:escape(window.location),ch:h,sc:m,ourl:escape(f),qid:l,sort:g,ssuid:e.getCookie("ssuid"),searchId:k||0};var j="http://pr.wenwen.com/pingd";e.submit(i,j)}};window[b]=e;window.stget=e.stget;e.run()})();